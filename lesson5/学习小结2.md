# FundMe åˆçº¦çŸ¥è¯†ç‚¹å¤ä¹ æ€»ç»“

æœ¬å¤ä¹ ç¬”è®°åŸºäº `FundMe` åˆçº¦ï¼Œæ¶‰åŠ Solidity çš„ä¸­çº§è¯­æ³•ã€Chainlink é¢„è¨€æœºã€å‡½æ•°ä¿®é¥°ç¬¦ã€fallback/receive å‡½æ•°ã€Gas ä¼˜åŒ–å†™æ³•ç­‰å†…å®¹ï¼Œé€‚åˆå·©å›ºç†è§£å¹¶ä½œä¸º GitHub å­¦ä¹ ç¬”è®°ã€‚

---

## âœ… åˆçº¦ä½œç”¨ç®€ä»‹

`FundMe` æ˜¯ä¸€ä¸ªä¼—ç­¹åˆçº¦ï¼Œå…è®¸ç”¨æˆ·å‡ºèµ„ ETHï¼Œåªæœ‰åˆçº¦æ‰€æœ‰è€…å¯ä»¥ææ¬¾ï¼Œææ¬¾å‰å°†æ‰€æœ‰èµ„åŠ©è®°å½•æ¸…é›¶ã€‚

---

## ğŸ“Œ å…³é”®å˜é‡ä¸å¸¸é‡

```solidity
address public /* immutable */ i_owner;
uint256 public constant MINIMUM_USD = 50 * 10 ** 18;
```

- `i_owner` æ˜¯éƒ¨ç½²è€…åœ°å€ï¼Œä»…éƒ¨ç½²æ—¶èµ‹å€¼ï¼Œå»ºè®®ä½¿ç”¨ `immutable` ä¿®é¥°ï¼ˆGas ä¼˜åŒ–ï¼‰ã€‚
- `MINIMUM_USD` æ˜¯å‡ºèµ„æœ€å°é‡‘é¢ï¼ˆå•ä½ä¸º 50 USDï¼ŒæŒ‰ 18 ä½ç²¾åº¦è¡¨ç¤ºï¼‰ã€‚ä½¿ç”¨ `constant`ï¼ˆå›ºå®šå€¼ã€ç¼–è¯‘æ—¶å·²çŸ¥ã€æœ€çœ Gasï¼‰ã€‚

---

## ğŸ§  modifier å…³é”®å­—

```solidity
modifier onlyOwner {
    if (msg.sender != i_owner) revert NotOwner();
    _;
}
```

- `onlyOwner` ç”¨äºæ§åˆ¶æƒé™ï¼šåªæœ‰åˆçº¦åˆ›å»ºè€… `i_owner` èƒ½è°ƒç”¨ä¿®é¥°çš„å‡½æ•°ã€‚
- ä½¿ç”¨ `revert NotOwner()` æ›¿ä»£ `require` + å­—ç¬¦ä¸²ï¼šæ›´çœ Gasï¼Œé”™è¯¯æç¤ºæ¸…æ™°ã€‚
- `_` è¡¨ç¤ºåç»­å°†æ’å…¥åŸå‡½æ•°ä¸»ä½“ã€‚

---

## ğŸ“¥ fund() å‡½æ•°é€»è¾‘

```solidity
function fund() public payable {
    require(msg.value.getConversionRate() >= MINIMUM_USD, "You need to spend more ETH!");
    addressToAmountFunded[msg.sender] += msg.value;
    funders.push(msg.sender);
}
```

- ä½¿ç”¨ `PriceConverter` library æ‰©å±• `uint256`ï¼Œè°ƒç”¨ `.getConversionRate()` æŠŠ ETH æ¢ç®—æˆ USDã€‚
- é€šè¿‡ `msg.value` è®°å½•å‡ºèµ„é‡‘é¢ï¼Œå­˜å…¥ `addressToAmountFunded` æ˜ å°„ã€‚
- åŒæ—¶æŠŠåœ°å€åŠ å…¥ `funders` æ•°ç»„ã€‚

---

## ğŸ’¸ withdraw() ææ¬¾å‡½æ•°

```solidity
function withdraw() public onlyOwner {
    for (...) {
        addressToAmountFunded[...] = 0;
    }
    funders = new address[](0);
    (bool callSuccess, ) = payable(msg.sender).call{value: address(this).balance}("");
    require(callSuccess, "Call failed");
}
```

- æ¸…ç©ºæ‰€æœ‰äººçš„å‡ºèµ„è®°å½•
- é‡ç½®èµ„åŠ©è€…æ•°ç»„ `funders`
- ä½¿ç”¨ `.call{value:...}()` å‘é€å…¨éƒ¨ ETH ç»™ `msg.sender`ï¼ˆå®‰å…¨æ€§æœ€é«˜ï¼Œæ¨èæ–¹å¼ï¼‰
- å¤‡é€‰æ–¹å¼æœ‰ `.transfer()` å’Œ `.send()`ï¼ˆå·²ç»è¢«å¼ƒç”¨æˆ–ä¸æ¨èï¼‰

---

## ğŸ§© receive() ä¸ fallback() å‡½æ•°

```solidity
receive() external payable { fund(); }
fallback() external payable { fund(); }
```

| å‡½æ•°å    | è§¦å‘æ¡ä»¶                                  |
|-----------|-------------------------------------------|
| `receive()` | æ¥æ”¶ ETHï¼Œä¸” msg.data ä¸ºç©º                 |
| `fallback()` | æ¥æ”¶ ETHï¼Œä¸” msg.data ä¸ä¸ºç©º / æ— å‡½æ•°åŒ¹é… |

ä½œç”¨ï¼šç¡®ä¿ç”¨æˆ·æ— è®ºæ€ä¹ˆå‘ ETHï¼Œéƒ½ä¼šæ‰§è¡Œ `fund()` å‡½æ•°ã€‚

---

## ğŸ“¦ PriceConverter åº“çš„ä½¿ç”¨

```solidity
using PriceConverter for uint256;
msg.value.getConversionRate();
```

- ç”¨ `using ... for` å£°æ˜åï¼Œuint256 ç±»å‹çš„å˜é‡å¯ç›´æ¥è°ƒç”¨ `PriceConverter` æä¾›çš„å‡½æ•°ã€‚
- æ˜¯ä¸€ç§ **æ‰©å±•åŸºæœ¬ç±»å‹** çš„è¯­æ³•ç³–ã€‚

---

## ğŸ” error + revert ç”¨æ³•

```solidity
error NotOwner();
if (msg.sender != i_owner) revert NotOwner();
```

- è‡ªå®šä¹‰é”™è¯¯ `error` å¯èŠ‚çœ Gasï¼Œæ›¿ä»£ä¼ ç»Ÿ `require(..., "reason")`
- æ›´é€‚åˆé¢‘ç¹ä½¿ç”¨çš„é”™è¯¯æ£€æŸ¥

---

## ğŸ” constructor æ„é€ å‡½æ•°

```solidity
constructor() {
    i_owner = msg.sender;
}
```

- åªåœ¨éƒ¨ç½²åˆçº¦æ—¶è¿è¡Œä¸€æ¬¡
- è®¾ç½® `i_owner` ä¸ºéƒ¨ç½²è€…åœ°å€

