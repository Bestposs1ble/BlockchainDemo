# ğŸ§  Solidity å‡½æ•°å‚æ•°æ•°æ®ä½ç½®é€ŸæŸ¥è¡¨

> âœ… æ•°æ®ä½ç½®æ˜¯ `memory`ã€`calldata` æˆ– `storage`ï¼Œç”¨äºæ ‡æ˜æ•°æ®å­˜å‚¨çš„ä½ç½®  
> âœ… ä¸»è¦é’ˆå¯¹â€œå¼•ç”¨ç±»å‹â€ï¼Œå€¼ç±»å‹ä¸éœ€è¦å†™

---

## ğŸ”¢ å€¼ç±»å‹ï¼ˆValue Typesï¼‰âœ… **ä¸éœ€è¦å†™æ•°æ®ä½ç½®**

| ç±»å‹         | ç¤ºä¾‹        | æ•°æ®ä½ç½®æ˜¯å¦éœ€è¦å†™ | ç”¨æ³•ç¤ºä¾‹ |
|--------------|-------------|--------------------|-----------|
| `uint256`    | `age`       | âŒ ä¸éœ€è¦           | `function f(uint256 age)` |
| `bool`       | `isActive`  | âŒ ä¸éœ€è¦           | `function toggle(bool active)` |
| `address`    | `user`      | âŒ ä¸éœ€è¦           | `function send(address to)` |

---

## ğŸ§µ å¼•ç”¨ç±»å‹ï¼ˆReference Typesï¼‰âœ… **å¿…é¡»æŒ‡å®šæ•°æ®ä½ç½®**

| ç±»å‹                  | æ¨èæ•°æ®ä½ç½®       | ç”¨æ³•ç¤ºä¾‹ |
|------------------------|------------------|-----------|
| `string`               | `memory` / `calldata` | `function setName(string memory name)` |
| `bytes`                | `memory` / `calldata` | `function handle(bytes memory data)` |
| åŠ¨æ€æ•°ç»„ï¼š`uint[]`     | `memory` / `calldata` | `function sum(uint[] memory arr)` |
| å›ºå®šæ•°ç»„ï¼š`uint[3]`    | `memory` / `calldata` | `function f(uint[3] memory arr)` |
| è‡ªå®šä¹‰ç»“æ„ä½“ `Person`  | `memory` / `storage` / `calldata` | `function add(Person memory p)` |
| æ˜ å°„ `mapping`         | ä»…æ”¯æŒ `storage`ï¼Œ**ä¸èƒ½å½“å‡½æ•°å‚æ•°ä½¿ç”¨ï¼** | âŒ ä¸å¯ç›´æ¥ä¼ å‚ |

---

## ğŸ’¡ ä¸‰ä¸ªå…³é”®ä½ç½®çš„ä½œç”¨è¯´æ˜ï¼š

| ä½ç½®         | è¯´æ˜ |
|--------------|------|
| `memory`     | ç”¨äºä¸´æ—¶å˜é‡ï¼Œå‡½æ•°è°ƒç”¨æ—¶å¤åˆ¶è¿›å»çš„ï¼Œ**å¯è¯»å¯å†™**ï¼Œä¸ä¿å­˜åˆ°é“¾ä¸Š |
| `calldata`   | **ä»… external å‡½æ•°ä¸­ä½¿ç”¨**ï¼Œå‚æ•°ä¸ºåªè¯»ï¼ˆä¸å¯ä¿®æ”¹ï¼‰ï¼Œ**æ›´èŠ‚çœ gas** |
| `storage`    | åªèƒ½ç”¨äºçŠ¶æ€å˜é‡çš„å¼•ç”¨ï¼Œä¸å¯ç”¨äºå‡½æ•°å‚æ•°ä¸­æ¥å—å¤–éƒ¨æ•°æ® |

---

## ğŸ§ª å®ç”¨å‡½æ•°å‚æ•°å†™æ³•ç¤ºä¾‹

```solidity
// âœ… ä¼ å…¥ä¸´æ—¶ string
function setName(string memory name) public { ... }

// âœ… ä¼ å…¥åŠ¨æ€æ•°ç»„
function setNumbers(uint256[] memory numbers) public { ... }

// âœ… External å‡½æ•°ä¸­ç”¨ calldataï¼ˆæ›´çœ gasï¼‰
function processData(bytes calldata input) external { ... }

// âœ… ç»“æ„ä½“å‚æ•°
function register(Person memory p) public { ... }

// âœ… ä¿®æ”¹çŠ¶æ€å˜é‡ä¸­çš„ç»“æ„ä½“ï¼ˆstorageï¼‰
function update(uint index, string memory newName) public {
    Person storage p = people[index];
    p.name = newName;
}
```

---

ğŸ“Œ **æ³¨æ„ï¼š**
- `calldata` åªèƒ½ç”¨äº **external å‡½æ•°å‚æ•°**
- `storage` ä¸èƒ½ç”¨äºä»å¤–éƒ¨æ¥æ”¶å˜é‡ï¼Œåªèƒ½ç”¨äºå‡½æ•°ä½“å†…å¼•ç”¨çŠ¶æ€å˜é‡
- æ‰€æœ‰å€¼ç±»å‹ï¼ˆå¦‚ `uint`ã€`bool`ã€`address`ï¼‰**æ°¸è¿œä¸ç”¨åŠ  memory æˆ– storage**
